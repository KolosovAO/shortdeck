{"version":3,"sources":["math/combination.ts","blocks/card.tsx","blocks/card_list.tsx","blocks/empty_card.tsx","blocks/cards.tsx","math/enumerateAllBoards.ts","App.tsx","math/computeEquity.ts","serviceWorker.ts","index.tsx"],"names":["Combination","Card","card","onClick","disabled","className","undefined","ALL_CARDS","reduce","acc","suite","split","reverse","forEach","push","CardList","selectCard","selected","map","i","key","includes","EmptyCard","Cards","cards","enumerateAllBoards","dead_cards","board","length","available_cards","filter","progress","result","next_card","pop","concat","getStraightHead","values","last","count","value","mapping","A","K","Q","J","T","9","8","7","6","getKickers","kickers","exclude","createCard","str","suit","computeCombination","hand","sort","a","b","s","c","d","h","flush_cards","Object","suite_values","straight_head","combination","ROYAL_FLUSH","kicker","STRAIGHT_FLUSH","sets","pairs","Number","FOUR_OF_A_KIND","FLUSH","slice","FULL_HOUSE","STRAIGHT","THREE_OF_A_KIND","best_pairs","TWO_PAIRS","ONE_PAIR","HIGH_HAND","compareHands","hand1","hand2","combination1","combination2","compact","val","App","useState","show_cardlist","setShowCardList","setBoard","p1","setP1","p2","setP2","p1_info","setP1Info","p2_info","setP2Info","current_setter","useRef","current_cards","current_index","cards_lost","p1_full","p2_full","Boolean","index","new_p1","current","new_p2","new_board","current_board","win","tie","lose","res","total","computeEquity","String","toFixed","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.b80ed969.chunk.js","sourcesContent":["type Suit = 'c' | 's' | 'd' | 'h';\r\ntype CardValue = 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14;\r\ntype Card = { value: CardValue; suit: Suit; };\r\n\r\nenum Combination {\r\n    ROYAL_FLUSH,\r\n    STRAIGHT_FLUSH,\r\n    FOUR_OF_A_KIND,\r\n    FLUSH,\r\n    FULL_HOUSE,\r\n    STRAIGHT,\r\n    THREE_OF_A_KIND,\r\n    TWO_PAIRS,\r\n    ONE_PAIR,\r\n    HIGH_HAND,\r\n};\r\n\r\ntype FullCombination = {\r\n    combination: Combination;\r\n    kicker: CardValue[];\r\n}\r\n\r\nconst getStraightHead = (values: CardValue[]): CardValue | undefined => {\r\n    let last = 0;\r\n    let count = 1;\r\n    for (const value of values) {\r\n        if (last - 1 === value) {\r\n            count++;\r\n            if (count === 5) {\r\n                return value + 4 as CardValue;\r\n            }\r\n        } else if (last !== value) {\r\n            count = 1;\r\n        }\r\n        last = value;\r\n    }\r\n}\r\n\r\nconst mapping: Record<string, CardValue> = {\r\n    A: 14,\r\n    K: 13,\r\n    Q: 12,\r\n    J: 11,\r\n    T: 10,\r\n    9: 9,\r\n    8: 8,\r\n    7: 7,\r\n    6: 6,\r\n};\r\n\r\nconst getKickers = (kickers: CardValue[], exclude: CardValue[]): CardValue[] => {\r\n    return kickers.filter((value) => !exclude.includes(value));\r\n}\r\n\r\nconst createCard = (str: string): Card => ({ value: mapping[str[0]], suit: str[1] as Suit });\r\n\r\nconst computeCombination = (hand: string[], board: string[]): FullCombination => {\r\n    const cards = [\r\n        ...board.map(createCard),\r\n        ...hand.map(createCard)\r\n    ].sort((a, b) => b.value - a.value);\r\n    const kickers = cards.map((card) => card.value);\r\n    const suite: Record<Suit, CardValue[]> = { s: [], c: [], d: [], h: [] };\r\n    const values: Partial<Record<CardValue, number>> = {};\r\n\r\n    for (const { suit, value } of cards) {\r\n        suite[suit].push(value);\r\n        values[value] = (values[value] || 0) + 1;\r\n    }\r\n\r\n    let flush_cards: CardValue[] | undefined = undefined;\r\n    for (const suite_values of Object.values(suite)) {\r\n        if (suite_values.length > 4) {\r\n            flush_cards = suite_values;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (flush_cards) {\r\n        const straight_head = getStraightHead(flush_cards);\r\n        if (straight_head) {\r\n            if (straight_head === 14) {\r\n                return {\r\n                    combination: Combination.ROYAL_FLUSH,\r\n                    kicker: [],\r\n                };\r\n            }\r\n            return {\r\n                combination: Combination.STRAIGHT_FLUSH,\r\n                kicker: [straight_head],\r\n            };\r\n        }\r\n    }\r\n\r\n    const sets: CardValue[] = [];\r\n    const pairs: CardValue[] = [];\r\n\r\n    for (const key in values) {\r\n        const value = Number(key) as CardValue;\r\n        const count = values[value];\r\n        if (count === 4) {\r\n            return {\r\n                combination: Combination.FOUR_OF_A_KIND,\r\n                kicker: [value, getKickers(kickers, [value])[0]],\r\n            }\r\n        }\r\n        if (count === 3) {\r\n            sets.push(value);\r\n        }\r\n        if (count === 2) {\r\n            pairs.push(value);\r\n        }\r\n    }\r\n\r\n    if (flush_cards) {\r\n        return {\r\n            combination: Combination.FLUSH,\r\n            kicker: flush_cards.slice(-5),\r\n        };\r\n    }\r\n\r\n    if (sets.length === 2) {\r\n        return {\r\n            combination: Combination.FULL_HOUSE,\r\n            kicker: [sets[1], sets[0]],\r\n        };\r\n    }\r\n\r\n    if (sets.length && pairs.length) {\r\n        return {\r\n            combination: Combination.FULL_HOUSE,\r\n            kicker: [sets[0], pairs[pairs.length - 1]],\r\n        };\r\n    }\r\n\r\n    const straight_head = getStraightHead(kickers);\r\n    if (straight_head) {\r\n        return {\r\n            combination: Combination.STRAIGHT,\r\n            kicker: [straight_head],\r\n        };\r\n    }\r\n\r\n    if (sets.length) {\r\n        return {\r\n            combination: Combination.THREE_OF_A_KIND,\r\n            kicker: [sets[0], ...getKickers(kickers, sets).slice(0, 2)],\r\n        };\r\n    }\r\n\r\n    if (pairs.length > 1) {\r\n        const best_pairs = pairs.slice(-2);\r\n        return {\r\n            combination: Combination.TWO_PAIRS,\r\n            kicker: [best_pairs[1], best_pairs[0], getKickers(kickers, best_pairs)[0]],\r\n        };\r\n    }\r\n\r\n    if (pairs.length === 1) {\r\n        return {\r\n            combination: Combination.ONE_PAIR,\r\n            kicker: [pairs[0], ...getKickers(kickers, pairs).slice(0, 4)],\r\n        };\r\n    }\r\n\r\n    return {\r\n        combination: Combination.HIGH_HAND,\r\n        kicker: kickers.slice(0, 5),\r\n    };\r\n}\r\n\r\nexport const compareHands = (hand1: string[], hand2: string[], board: string[]): 0 | 1 | 2 => {\r\n    const combination1 = computeCombination(hand1, board);\r\n    const combination2 = computeCombination(hand2, board);\r\n\r\n    if (combination1.combination === combination2.combination) {\r\n        for (let i = 0; i < combination1.kicker.length; i++) {\r\n            if (combination1.kicker[i] > combination2.kicker[i]) {\r\n                return 1;\r\n            } else if (combination1.kicker[i] < combination2.kicker[i]) {\r\n                return 2;\r\n            }\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    return combination1.combination < combination2.combination ? 1 : 2;\r\n}","import React from 'react';\r\n\r\ntype Props = {\r\n    card: string;\r\n    disabled?: boolean;\r\n    onClick: () => void;\r\n};\r\n\r\nexport const Card: React.FC<Props> = ({ card, onClick, disabled }) => {\r\n    let className = \"card card__suite-\" + card[1];\r\n    if (disabled) {\r\n        className += \" card__disabled\";\r\n    }\r\n    return (\r\n        <div className={className} onClick={disabled ? undefined : onClick}>\r\n            {card}\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Card } from './card';\r\n\r\ntype Props = {\r\n    selected: string[];\r\n    selectCard: (card: string) => void;\r\n};\r\n\r\nconst ALL_CARDS = ['c', 's', 'h', 'd'].reduce<string[]>((acc, suite) => {\r\n    '6789TJQKA'.split('').reverse().forEach((card) => {\r\n        acc.push(card + suite);\r\n    });\r\n    return acc;\r\n}, []);\r\n\r\nexport const CardList: React.FC<Props> = ({ selectCard, selected }) => {\r\n    return (\r\n        <div className=\"card-list\">\r\n            {\r\n                ALL_CARDS.map((card, i) =>\r\n                    <Card key={i} card={card} onClick={() => selectCard(card)} disabled={selected.includes(card)} />\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\ntype Props = {\r\n    onClick: () => void;\r\n};\r\n\r\nexport const EmptyCard: React.FC<Props> = ({ onClick }) => {\r\n    return (\r\n        <div className=\"card card__empty\" onClick={onClick}>\r\n            #\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Card } from './card';\r\nimport { EmptyCard } from './empty_card';\r\n\r\ntype Props = {\r\n    className: string;\r\n    cards: Array<string | undefined>;\r\n    selectCard: (index: number) => void;\r\n};\r\n\r\nexport const Cards: React.FC<Props> = ({ cards, selectCard, className }) => {\r\n    return (\r\n        <div className={className}>\r\n            {\r\n                cards.map((card, i) => card\r\n                    ? <Card key={i} card={card} onClick={() => selectCard(i)} />\r\n                    : <EmptyCard key={i} onClick={() => selectCard(i)} />\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n};\r\n","const ALL_CARDS = '6789TJKQA'.split('').reduce<string[]>((acc, card) => {\r\n    ['c', 's', 'h', 'd'].forEach((suite) => {\r\n        acc.push(card + suite);\r\n    });\r\n    return acc;\r\n}, []);\r\n\r\nexport const enumerateAllBoards = (dead_cards: string[], board: string[] = []): string[][] => {\r\n    if (board.length === 5) {\r\n        return [board];\r\n    }\r\n    const available_cards = ALL_CARDS.filter((card) => !board.includes(card) && !dead_cards.includes(card));\r\n    const progress: string[][] = [board];\r\n    const result: string[][] = [];\r\n    while (available_cards.length) {\r\n        const next_card = available_cards.pop()!;\r\n        progress.forEach((cards) => {\r\n            if (cards.length === 4) {\r\n                result.push(cards.concat(next_card));\r\n            } else {\r\n                if (cards.length + available_cards.length > 4) {\r\n                    progress.push(cards.concat(next_card));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n};\r\n","import React, { useState, useRef } from 'react';\nimport { CardList } from './blocks/card_list';\nimport { Cards } from './blocks/cards';\nimport './App.css';\nimport { computeEquity } from './math/computeEquity';\n\ntype Cards = Array<string | undefined>;\n\nconst compact = <T extends any>(val: T | undefined): val is NonNullable<T> => !!val;\n\nfunction App() {\n\tconst [show_cardlist, setShowCardList] = useState(false);\n\tconst [board, setBoard] = useState<Cards>([undefined, undefined, undefined, undefined, undefined]);\n\tconst [p1, setP1] = useState<Cards>([undefined, undefined]);\n\tconst [p2, setP2] = useState<Cards>([undefined, undefined]);\n\tconst [p1_info, setP1Info] = useState('');\n\tconst [p2_info, setP2Info] = useState('');\n\tconst current_setter = useRef(setBoard);\n\tconst current_cards = useRef(board);\n\tconst current_index = useRef(0);\n\tconst cards_lost = useRef(0);\n\n\tconst selectP1Cards = (index: number) => {\n\t\tsetShowCardList(true);\n\t\tconst new_p1 = p1.map((c, i) => i >= index ? undefined : c);\n\t\tsetP1(new_p1);\n\t\tcurrent_setter.current = setP1;\n\t\tcurrent_cards.current = new_p1;\n\t\tcards_lost.current = 2 - index;\n\t\tcurrent_index.current = index;\n\t};\n\n\tconst selectP2Cards = (index: number) => {\n\t\tsetShowCardList(true);\n\t\tconst new_p2 = p2.map((c, i) => i >= index ? undefined : c);\n\t\tsetP2(new_p2);\n\t\tcurrent_setter.current = setP2;\n\t\tcurrent_cards.current = new_p2;\n\t\tcards_lost.current = 2 - index;\n\t\tcurrent_index.current = index;\n\t};\n\n\tconst selectBoard = (index: number) => {\n\t\tsetShowCardList(true);\n\t\tconst new_board = board.map((c, i) => i >= index ? undefined : c);\n\t\tsetBoard(new_board);\n\t\tcurrent_setter.current = setBoard;\n\t\tcurrent_cards.current = new_board;\n\t\tcards_lost.current = index < 3\n\t\t\t? 3 - index\n\t\t\t: 1;\n\t\tcurrent_index.current = index;\n\t}\n\n\tconst selectCard = (card: string) => {\n\t\tcurrent_cards.current = current_cards.current.map((c, i) => i === current_index.current ? card : c);\n\t\tcurrent_index.current++;\n\t\tcurrent_setter.current(current_cards.current);\n\t\tcards_lost.current--;\n\t\tif (cards_lost.current === 0) {\n\t\t\tsetShowCardList(false);\n\t\t}\n\t};\n\n\tconst p1_full = p1.filter(compact);\n\tconst p2_full = p2.filter(compact);\n\n\tconst compute = () => {\n\t\tif (p1_full.length !== 2 || p2_full.length !== 2) {\n\t\t\treturn;\n\t\t}\n\t\tconst { win, tie, lose, total } = computeEquity(p1_full, p2_full, board.filter(compact));\n\t\tsetP1Info(String(((win / total + tie / 2 / total) * 100).toFixed(2)));\n\t\tsetP2Info(String(((lose / total + tie / 2 / total) * 100).toFixed(2)));\n\t}\n\n\tconst selected = [...p1, ...p2, ...board].filter(Boolean) as string[];\n\n\treturn (\n\t\t<div>\n\t\t\tPlayer1 {p1_info}\n\t\t\t<Cards className=\"player\" cards={p1} selectCard={selectP1Cards} />\n\t\t\tPlayer2 {p2_info}\n\t\t\t<Cards className=\"player\" cards={p2} selectCard={selectP2Cards} />\n\t\t\tBOARD\n\t\t\t<Cards className=\"board\" selectCard={selectBoard} cards={board} />\n\t\t\t<button onClick={compute}>COMPUTE</button>\n\t\t\t{show_cardlist && <CardList selected={selected} selectCard={selectCard} />}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import { enumerateAllBoards } from './enumerateAllBoards';\r\nimport { compareHands } from './combination';\r\n\r\nexport const computeEquity = (hand1: string[], hand2: string[], current_board: string[] = []) => {\r\n    let win = 0;\r\n    let tie = 0;\r\n    let lose = 0;\r\n    const dead_cards = [...hand1, ...hand2];\r\n    enumerateAllBoards(dead_cards, current_board).forEach((board) => {\r\n        const res = compareHands(hand1, hand2, board);\r\n        if (res === 0) {\r\n            tie++;\r\n        } else if (res === 1) {\r\n            win++;\r\n        } else {\r\n            lose++;\r\n        }\r\n    });\r\n\r\n    const total = win + tie + lose;\r\n    return { win, tie, lose, total };\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}